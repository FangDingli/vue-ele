(function(t){function s(s){for(var i,o,r=s[0],l=s[1],c=s[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(s);while(p.length)p.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],i=!0,r=1;r<e.length;r++){var l=e[r];0!==a[l]&&(i=!1)}i&&(n.splice(s--,1),t=o(o.s=e[0]))}return t}var i={},a={app:0},n=[];function o(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=i,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)o.d(e,i,function(s){return t[s]}.bind(null,i));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=s,r=r.slice();for(var c=0;c<r.length;c++)s(r[c]);var u=l;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"027b":function(t,s,e){"use strict";var i=e("758a"),a=e.n(i);a.a},"046f":function(t,s,e){"use strict";var i=e("9fed"),a=e.n(i);a.a},"04b3":function(t,s,e){},"120c":function(t,s,e){"use strict";var i=e("f72a"),a=e.n(i);a.a},2556:function(t,s,e){"use strict";var i=e("04b3"),a=e.n(i);a.a},"2cca":function(t,s,e){},"337c":function(t,s,e){"use strict";var i=e("fd74"),a=e.n(i);a.a},3661:function(t,s,e){},4429:function(t,s,e){},"4fb9":function(t,s,e){},"52b5":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),a=(e("df49"),e("2696")),n=e("031d"),o=e("1cc1"),r=e("0679"),l=e("2799"),c=e("36b6"),u=e("0f85");i["a"].use(a["a"]),i["a"].use(n["a"]),i["a"].use(o["a"]),i["a"].use(r["a"]),i["a"].use(l["a"]),i["a"].use(c["a"]),i["a"].use(u["a"]);var d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("v-header",{attrs:{seller:t.seller}}),e("div",{staticClass:"tab-wrapper"},[e("tab",{attrs:{tab:t.tab,initSlideIndex:0}})],1)],1)},p=[],h=(e("ac1f"),e("841c"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header",on:{click:t.showDetail}},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),e("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?e("div",{staticClass:"support"},[e("support-icon",{attrs:{size:1,type:t.seller.supports[0].type}}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()]),t.seller.supports?e("div",{staticClass:"support-count"},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),e("div",{staticClass:"bulletin-wrapper"},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),e("i",{staticClass:"icon-keyboard_arrow_right"})]),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})])])}),f=[],v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"support-icon",class:t.iconCls})},m=[],C=(e("99af"),e("a9e3"),{name:"support-icon",props:{size:Number,type:Number},computed:{iconCls:function(){var t=["decrease","discount","special","invoice","guarantee"];return"icon-".concat(this.size," ").concat(t[this.type])}}}),b=C,_=(e("fd6e"),e("2877")),g=Object(_["a"])(b,v,m,!1,null,"69460678",null),y=g.exports,w={name:"v-header",props:{seller:{type:Object,default:function(){return{}}}},methods:{showDetail:function(){this.headerDetailCom=this.headerDetailCom||this.$createHeaderDetail({$props:{seller:"seller"}}),this.headerDetailCom.show()}},components:{supportIcon:y}},k=w,x=(e("b3c6"),Object(_["a"])(k,h,f,!1,null,"76b74928",null)),S=x.exports,P=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tab"},[e("cube-tab-bar",{ref:"tabbar",attrs:{data:t.tab,showSlider:!0,useTransition:!1},model:{value:t.selectedLabel,callback:function(s){t.selectedLabel=s},expression:"selectedLabel"}}),e("div",{staticClass:"slide-wrapper"},[e("cube-slide",{ref:"slide",attrs:{loop:!1,showDots:!1,autoPlay:!1,initialIndex:t.index,options:t.slideOption},on:{change:t.slideChange,scroll:t.slideScroll}},t._l(t.tab,(function(t,s){return e("cube-slide-item",{key:s},[e(t.component,{ref:"slideComp",refInFor:!0,tag:"component",attrs:{data:t.data}})],1)})),1)],1)],1)},$=[],L=(e("c740"),{name:"tab",data:function(){return{index:this.initSlideIndex,slideOption:{listenScroll:!0,probeType:3,directionLockThreshold:0}}},props:{tab:{type:Array,default:function(){return[]}},initSlideIndex:{type:Number,default:0}},computed:{selectedLabel:{get:function(){return this.tab[this.index].label},set:function(t){this.index=this.tab.findIndex((function(s){return s.label===t}))}}},mounted:function(){this.slideChange(this.index)},methods:{slideChange:function(t){this.index=t;var s=this.$refs.slideComp[t];s.getCurrentData&&s.getCurrentData()},slideScroll:function(t){var s=this.$refs.tabbar.$el.clientWidth,e=this.$refs.slide.slide.scrollerWidth,i=-t.x/e*s;this.$refs.tabbar.setSliderTransform(i)}}}),O=L,T=(e("5c97"),Object(_["a"])(O,P,$,!1,null,"3a8284a2",null)),F=T.exports,j=e("bc3a"),N=e.n(j),E=0,D={development:"/",production:"http://8.136.112.243/"},A=D["production"];function R(t){return function(s){return N.a.get(A+t,{params:s}).then((function(t){var s=t.data,e=s.errno,i=s.data;if(e===E)return i})).catch((function(){}))}}var z=R("/api/seller"),I=R("/api/goods"),M=R("/api/ratings"),B=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("cube-scroll",{staticClass:"seller",attrs:{options:t.sellerScrollOptions}},[e("div",{staticClass:"seller-content"},[e("div",{staticClass:"overview"},[e("h1",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"desc border-bottom-1px"},[e("star",{attrs:{size:36,score:t.seller.score}}),e("span",{staticClass:"text"},[t._v("("+t._s(t.seller.ratingCount)+")")]),e("span",{staticClass:"text"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1),e("ul",{staticClass:"remark"},[e("li",{staticClass:"block"},[e("h2",[t._v("起送价")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.minPrice))]),t._v("元 ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("商家配送")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryPrice))]),t._v("元 ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("平均配送时间")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟 ")])])]),e("div",{staticClass:"favorite",on:{click:t.toggleFavorite}},[e("span",{staticClass:"icon-favorite",class:{active:t.favorite}}),e("span",{staticClass:"text"},[t._v(t._s(t.favoriteText))])])]),e("split"),e("div",{staticClass:"bulletin"},[e("h1",{staticClass:"title"},[t._v("公告与活动")]),e("div",{staticClass:"content-wrapper border-bottom-1px"},[e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(s,i){return e("li",{key:i,staticClass:"support-item border-bottom-1px"},[e("support-ico",{attrs:{size:4,type:t.seller.supports[i].type}}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[i].description))])],1)})),0):t._e()]),e("split"),e("div",{staticClass:"pics"},[e("h1",{staticClass:"title"},[t._v("商家实景")]),e("cube-scroll",{staticClass:"pic-wrapper",attrs:{options:t.picScrollOptions}},[e("ul",{staticClass:"pic-list"},t._l(t.seller.pics,(function(t,s){return e("li",{key:s,staticClass:"pic-item"},[e("img",{attrs:{src:t,width:"120",height:"90"}})])})),0)])],1),e("split"),e("div",{staticClass:"info"},[e("h1",{staticClass:"title border-bottom-1px"},[t._v("商家信息")]),e("ul",t._l(t.seller.infos,(function(s,i){return e("li",{key:i,staticClass:"info-item border-bottom-1px"},[t._v(" "+t._s(s)+" ")])})),0)])],1)])},H=[],J=e("335a"),W="__seller__";function V(t,s,e){var i=J["a"].get(W,{});i[t]||(i[t]={}),i[t][s]=e,J["a"].set(W,i)}function X(t,s,e){var i=J["a"].get(W,{});return i[t]&&i[t][s]||e}var q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:t.starType},t._l(t.itemClasses,(function(t,s){return e("span",{key:s,staticClass:"star-item",class:t})})),0)},G=[],K=5,Q="on",U="half",Y="off",Z={props:{size:Number,score:Number},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],s=Math.floor(2*this.score)/2,e=s%1!==0,i=Math.floor(s),a=0;a<i;a++)t.push(Q);e&&t.push(U);while(t.length<K)t.push(Y);return t}}},tt=Z,st=(e("5717"),Object(_["a"])(tt,q,G,!1,null,null,null)),et=st.exports,it=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"split"})},at=[],nt={name:"split"},ot=nt,rt=(e("027b"),Object(_["a"])(ot,it,at,!1,null,"5268bc3a",null)),lt=rt.exports,ct={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{favorite:!1,sellerScrollOptions:{directionLockThreshold:0,click:!1},picScrollOptions:{scrollX:!0,stopPropagation:!0,directionLockThreshold:0}}},computed:{seller:function(){return this.data.seller||{}},favoriteText:function(){return this.favorite?"已收藏":"收藏"}},created:function(){this.favorite=X(this.seller.id,"favorite",!1)},methods:{toggleFavorite:function(){this.favorite=!this.favorite,V(this.seller.id,"favorite",this.favorite)}},components:{SupportIco:y,Star:et,Split:lt}},ut=ct,dt=(e("fdcf"),Object(_["a"])(ut,B,H,!1,null,"0d8eab09",null)),pt=dt.exports,ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{staticClass:"scroll-nav-wrapper"},[t.goods.length?e("cube-scroll-nav",{attrs:{side:!0,data:t.goods,options:t.scrollOptions},scopedSlots:t._u([{key:"bar",fn:function(s){return[e("cube-scroll-nav-bar",{attrs:{direction:"vertical",current:s.current,labels:s.labels,txts:t.barText},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"text"},[s.txt.type>=1?e("support-icon",{attrs:{size:3,type:s.txt.type}}):t._e(),e("span",[t._v(t._s(s.txt.name))]),s.txt.count?e("span",{staticClass:"num"},[e("bubble",{attrs:{num:s.txt.count}})],1):t._e()],1)]}}],null,!0)})]}}],null,!1,1115052358)},t._l(t.goods,(function(s){return e("cube-scroll-nav-panel",{key:s.name,attrs:{label:s.name,title:s.name}},[e("ul",t._l(s.foods,(function(s){return e("li",{key:s.name,staticClass:"food-item",on:{click:function(e){return t.foodClick(s)}}},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:s.icon,width:"57",height:"57",alt:""}})]),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount))]),e("span",[t._v("好评率"+t._s(s.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))])])]),e("div",{staticClass:"cart-control-wrapper"},[e("CartControl",{attrs:{food:s},on:{ball_anim_trigger:t.onAdd}})],1)])})),0)])})),1):t._e()],1),e("div",{staticClass:"shop-cart-wrapper"},[e("shop-cart",{ref:"shopCart",attrs:{"selected-foods":t.selectedFoods,"min-price":t.seller.minPrice,"delivery-price":t.seller.deliveryPrice}})],1)])},ft=[],vt=(e("4160"),e("159b"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shopcart",on:{click:t.toggleList}},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left"},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[e("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[e("bubble",{attrs:{num:t.totalCount}})],1)]),e("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice))])]),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:t.payClass,on:{click:t.pay}},[t._v(t._s(t.payDesc))])])]),e("div",{staticClass:"ball-container"},t._l(t.balls,(function(s,i){return e("div",{key:i},[e("transition",{on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)})),0)])])}),mt=[],Ct=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"bubble"},[t._v(t._s(t.num))])},bt=[],_t={name:"bubble",props:{num:{type:Number}}},gt=_t,yt=(e("b52b"),Object(_["a"])(gt,Ct,bt,!1,null,"3d2f306e",null)),wt=yt.exports,kt=10;function xt(){for(var t=[],s=0;s<kt;s++)t.push({show:!1});return t}var St="inner-hook",Pt={name:"shop-cart",props:{selectedFoods:{type:Array,default:function(){return[]}},minPrice:{type:Number,default:0},deliveryPrice:{type:Number,default:0},showCartListProp:{type:Boolean,default:!1}},data:function(){return{balls:xt(),showCartList:this.showCartListProp}},created:function(){this.ballsList=[]},methods:{ballFallAnim:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.ballsList.push(e)}},beforeDrop:function(t){var s=this.ballsList[this.ballsList.length-1],e=s.el.getBoundingClientRect(),i=e.left-32,a=-(window.innerHeight-e.top-22);t.style.display="",t.style.transform=t.style.webkitTransform="translate(0,".concat(a,"px)");var n=t.getElementsByClassName(St)[0];n.style.transform=n.style.webkitTransform="translate(".concat(i,"px,0)")},dropping:function(t,s){this._reflow=document.body.offsetHeight,t.style.transform=t.style.webkitTransform="translate(0,0)";var e=t.getElementsByClassName(St)[0];e.style.transform=e.style.webkitTransform="translate(0,0)",t.addEventListener("transitionend",s)},afterDrop:function(t){var s=this.ballsList.shift();s&&(s.show=!1,t.style.display="none")},toggleList:function(){if(this.showCartList)this._hideShopCartList();else{if(!this.totalCount)return;this._showShopCartList(),this._showShopCartSticky(),this.showCartList=!0}},_showShopCartList:function(){var t=this;this.shopCartListComp=this.shopCartListComp||this.$createShopCartList({$props:{selectedFoods:"selectedFoods"},$events:{mask:function(){t.showCartList=!1},leave:function(){t._hideShopCartSticky(),t.showCartList=!1},add:function(s){t.shopCartStickyComp.ballFallAnim(s)}}}),this.shopCartListComp.show()},_showShopCartSticky:function(){this.shopCartStickyComp=this.shopCartStickyComp||this.$createShopCartSticky({$props:{selectedFoods:"selectedFoods",minPrice:"minPrice",deliveryPrice:"deliveryPrice",showCartListProp:"showCartList",shopCartList:this.shopCartListComp}}),this.shopCartStickyComp.show()},_hideShopCartList:function(){"shop-cart-sticky"==this.$parent.$el.className?this.$parent.shopCartList.hide():this.shopCartListComp.hide()},_hideShopCartSticky:function(){this.shopCartStickyComp.hide()},pay:function(t){this.totalPrice<this.minPrice||(this.dialogComp=this.$createDialog({type:"confirm",title:"支付",content:"共需支付 ".concat(this.totalPrice," 元")}).show(),t.stopPropagation())}},computed:{payDesc:function(){return 0==this.totalPrice?"".concat(this.minPrice,"元起送"):this.totalPrice>0&&this.totalPrice<this.minPrice?"还差".concat(this.minPrice-this.totalPrice,"元起送"):"去结算"},payClass:function(){return!this.totalCount||this.totalPrice>0&&this.totalPrice<this.minPrice?"not-enough":"enough"},totalCount:function(){var t=0;return this.selectedFoods.forEach((function(s){t+=s.count})),t},totalPrice:function(){var t=0;return this.selectedFoods.forEach((function(s){t+=s.count*s.price})),t}},watch:{showCartListProp:function(t){this.showCartList=t},totalCount:function(t){this.showCartList&&0==t&&this._hideShopCartList()}},components:{bubble:wt}},$t=Pt,Lt=(e("2556"),Object(_["a"])($t,vt,mt,!1,null,"0c00381c",null)),Ot=Lt.exports,Tt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",on:{click:function(s){return s.stopPropagation(),t.decreaseFood(s)}}},[e("span",{staticClass:"inner icon-remove_circle_outline"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),e("div",{staticClass:"cart-add icon-add_circle",on:{click:function(s){return s.stopPropagation(),t.addFood(s)}}})],1)},Ft=[],jt="ball_anim_trigger",Nt={name:"cart-control",props:{food:{type:Object}},methods:{addFood:function(t){this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit(jt,t.target)},decreaseFood:function(){this.food.count>0&&this.food.count--}}},Et=Nt,Dt=(e("663f"),Object(_["a"])(Et,Tt,Ft,!1,null,"8eccf4a0",null)),At=Dt.exports,Rt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"move"},on:{"after-leave":t.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"food"},[e("cube-scroll",{ref:"scroll"},[e("div",{staticClass:"food-content"},[e("div",{staticClass:"image-header"},[e("img",{attrs:{src:t.food.image}}),e("div",{staticClass:"back",on:{click:t.hide}},[e("i",{staticClass:"icon-arrow_lift"})])]),e("div",{staticClass:"content"},[e("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),e("div",{staticClass:"detail"},[e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),e("div",{staticClass:"cart-control-wrapper"},[e("CartControl",{attrs:{food:t.food},on:{ball_anim_trigger:t.addFood}})],1),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count,expression:"!food.count"}],staticClass:"buy",on:{click:t.addFirst}},[t._v(" 加入购物车 ")])])],1),e("split",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}]}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}],staticClass:"info"},[e("h1",{staticClass:"title"},[t._v("商品信息")]),e("p",{staticClass:"text"},[t._v(t._s(t.food.info))])]),e("split"),e("div",{staticClass:"rating"},[e("h1",{staticClass:"title"},[t._v("商品评价")]),e("rating-select",{attrs:{selectType:t.selectType,onlyContent:t.onlyContent,desc:t.desc,ratings:t.ratings},on:{select:t.onSelect,toggle:t.onToggle}}),e("div",{staticClass:"rating-wrapper"},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.computedRatings&&t.computedRatings.length,expression:"computedRatings && computedRatings.length"}]},t._l(t.computedRatings,(function(s,i){return e("li",{key:i,staticClass:"rating-item border-bottom-1px"},[e("div",{staticClass:"user"},[e("span",{staticClass:"name"},[t._v(t._s(s.username))]),e("img",{staticClass:"avatar",attrs:{width:"12",height:"12",src:s.avatar}})]),e("div",{staticClass:"time"},[t._v(t._s(t.format(s.rateTime)))]),e("p",{staticClass:"text"},[e("span",{class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":1===s.rateType}}),t._v(t._s(s.text)+" ")])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.computedRatings||!t.computedRatings.length,expression:"!computedRatings || !computedRatings.length"}],staticClass:"no-rating"},[t._v(" 暂无评价 ")])])],1)],1)])],1)])},zt=[],It=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating-select"},[e("div",{staticClass:"rating-type border-bottom-1px"},[e("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(s){return t.select(2)}}},[t._v(t._s(t.desc.all)),e("span",{staticClass:"count"},[t._v(t._s(t.ratings.length))])]),e("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(s){return t.select(0)}}},[t._v(t._s(t.desc.positive)),e("span",{staticClass:"count"},[t._v(t._s(t.positives.length))])]),e("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(s){return t.select(1)}}},[t._v(t._s(t.desc.negative)),e("span",{staticClass:"count"},[t._v(t._s(t.negatives.length))])])]),e("div",{staticClass:"switch",class:{on:t.onlyContent},on:{click:t.toggleContent}},[e("span",{staticClass:"icon-check_circle"}),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])])},Mt=[],Bt=(e("4de4"),0),Ht=1,Jt=2,Wt="toggle",Vt="select",Xt={props:{ratings:{type:Array,default:function(){return[]}},selectType:{type:Number,default:Jt},onlyContent:{type:Boolean,default:!1},desc:{type:Object,default:function(){return{all:"全部",positive:"满意",negative:"不满意"}}}},computed:{positives:function(){return this.ratings.filter((function(t){return t.rateType===Bt}))},negatives:function(){return this.ratings.filter((function(t){return t.rateType===Ht}))}},methods:{select:function(t){this.$emit(Vt,t)},toggleContent:function(){this.$emit(Wt)}}},qt=Xt,Gt=(e("8f0f"),Object(_["a"])(qt,It,Mt,!1,null,null,null)),Kt=Gt.exports,Qt="show",Ut="hide",Yt={data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0,this.$emit(Qt)},hide:function(){this.visible=!1,this.$emit(Ut)}}},Zt=2,ts={data:function(){return{selectType:Zt,onlyContent:!0}},computed:{computedRatings:function(){var t=this,s=[];return this.ratings.forEach((function(e){t.onlyContent&&!e.text||t.selectType!==Zt&&e.rateType!==t.selectType||s.push(e)})),s}},methods:{onSelect:function(t){this.selectType=t},onToggle:function(){this.onlyContent=!this.onlyContent}}},ss=e("5a0c"),es=e.n(ss),is="leave",as="ball_anim_trigger",ns={name:"food",mixins:[Yt,ts],props:{food:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,desc:{all:"全部",positive:"好评",negative:"差评"}}},computed:{ratings:function(){return this.food.ratings}},methods:{afterLeave:function(){this.$emit(is)},addFood:function(t){this.$emit(as,t)},addFirst:function(t){this.$set(this.food,"count",1),this.$emit(as,t.target)},format:function(t){return es()(t).format()}},components:{CartControl:At,Split:lt,RatingSelect:Kt}},os=ns,rs=(e("d0b3"),Object(_["a"])(os,Rt,zt,!1,null,"76b8527e",null)),ls=rs.exports,cs={name:"goods",props:{data:{type:Object,default:function(){return{fetched:!1}}}},data:function(){return{goods:[],scrollOptions:{click:!1,directionLockThreshold:0},clickedFood:{}}},methods:{getCurrentData:function(){var t=this;this.fetched||(this.fetched=!0,I({id:this.seller.id}).then((function(s){t.goods=s})))},onAdd:function(t){this.$refs.shopCart.ballFallAnim(t)},foodClick:function(t){this.clickedFood=t,this._showFood(),this._showShopCartSticky()},_showFood:function(){var t=this;this.foodComp=this.foodComp||this.$createFood({$props:{food:"clickedFood"},$events:{leave:function(){t._hideShopCartSticky()},ball_anim_trigger:function(s){t.shopCartStickyComp.ballFallAnim(s)}}}),this.foodComp.show()},_showShopCartSticky:function(){this.shopCartStickyComp=this.shopCartStickyComp||this.$createShopCartSticky({$props:{selectedFoods:"selectedFoods",minPrice:this.seller.minPrice,deliveryPrice:this.seller.deliveryPrice}}),this.shopCartStickyComp.show()},_hideShopCartSticky:function(){this.shopCartStickyComp.hide()}},computed:{seller:function(){return this.data.seller},selectedFoods:function(){var t=[];return this.goods.forEach((function(s){s.foods.forEach((function(s){s.count&&t.push(s)}))})),t},barText:function(){var t=[];return this.goods.forEach((function(s){var e=s.name,i=s.type,a=s.foods,n=0;a.forEach((function(t){n+=t.count||0})),t.push({type:i,name:e,count:n})})),t}},components:{ShopCart:Ot,CartControl:At,supportIcon:y,bubble:wt,Food:ls}},us=cs,ds=(e("b23b"),Object(_["a"])(us,ht,ft,!1,null,"04bd72ec",null)),ps=ds.exports,hs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("cube-scroll",{ref:"scroll",staticClass:"ratings",attrs:{options:t.scrollOptions}},[e("div",{staticClass:"ratings-content"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-left"},[e("h1",{staticClass:"score"},[t._v(t._s(t.seller.score))]),e("div",{staticClass:"title"},[t._v("综合评分")]),e("div",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),e("div",{staticClass:"overview-right"},[e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("服务态度")]),e("star",{attrs:{size:36,score:t.seller.serviceScore}}),e("span",{staticClass:"score"},[t._v(t._s(t.seller.serviceScore))])],1),e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("商品评分")]),e("star",{attrs:{size:36,score:t.seller.foodScore}}),e("span",{staticClass:"score"},[t._v(t._s(t.seller.foodScore))])],1),e("div",{staticClass:"delivery-wrapper"},[e("span",{staticClass:"title"},[t._v("送达时间")]),e("span",{staticClass:"delivery"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),e("split"),e("rating-select",{attrs:{selectType:t.selectType,onlyContent:t.onlyContent,ratings:t.ratings},on:{select:t.onSelect,toggle:t.onToggle}}),e("div",{staticClass:"rating-wrapper"},[e("ul",t._l(t.computedRatings,(function(s,i){return e("li",{key:i,staticClass:"rating-item border-bottom-1px"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"28",height:"28",src:s.avatar}})]),e("div",{staticClass:"content"},[e("h1",{staticClass:"name"},[t._v(t._s(s.username))]),e("div",{staticClass:"star-wrapper"},[e("star",{attrs:{size:24,score:s.score}}),e("span",{directives:[{name:"show",rawName:"v-show",value:s.deliveryTime,expression:"rating.deliveryTime"}],staticClass:"delivery"},[t._v(t._s(s.deliveryTime))])],1),e("p",{staticClass:"text"},[t._v(t._s(s.text))]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.recommend&&s.recommend.length,expression:"rating.recommend && rating.recommend.length"}],staticClass:"recommend"},[e("span",{staticClass:"icon-thumb_up"}),t._l(s.recommend,(function(s,i){return e("span",{key:i,staticClass:"item"},[t._v(" "+t._s(s)+" ")])}))],2),e("div",{staticClass:"time"},[t._v(" "+t._s(t.format(s.rateTime))+" ")])])])})),0)])],1)])},fs=[],vs={name:"ratings",mixins:[ts],props:{data:{type:Object}},data:function(){return{ratings:[],scrollOptions:{click:!1,directionLockThreshold:0}}},computed:{seller:function(){return this.data.seller||{}}},methods:{getCurrentData:function(){var t=this;this.fetched||(this.fetched=!0,M({id:this.seller.id}).then((function(s){t.ratings=s})))},format:function(t){return es()(t).format()}},components:{Star:et,Split:lt,RatingSelect:Kt},watch:{selectType:function(){var t=this;this.$nextTick((function(){t.$refs.scroll.refresh()}))}}},ms=vs,Cs=(e("120c"),Object(_["a"])(ms,hs,fs,!1,null,"1bc27be8",null)),bs=Cs.exports,_s=e("72bf"),gs=e.n(_s),ys={name:"App",components:{VHeader:S,Tab:F},data:function(){return{seller:{id:gs.a.parse(location.search).id}}},computed:{tab:function(){return[{label:"商品",component:ps,data:{seller:this.seller}},{label:"评论",component:bs,data:{seller:this.seller}},{label:"商家",component:pt,data:{seller:this.seller}}]}},methods:{_getSellerMethod:function(){var t=this;z({id:this.seller.id}).then((function(s){t.seller=Object.assign({},t.seller,s)}))}},created:function(){this._getSellerMethod()}},ws=ys,ks=(e("df84"),Object(_["a"])(ws,d,p,!1,null,"6192c10f",null)),xs=ks.exports,Ss=(e("f867"),e("df9a")),Ps=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"header-detail"},[e("div",{staticClass:"detail-wrapper clear-fix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"star-wrapper"},[e("star",{attrs:{size:48,score:t.seller.score}})],1),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("优惠信息")]),e("div",{staticClass:"line"})]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,(function(s,i){return e("li",{key:s.id,staticClass:"support-item"},[e("support-icon",{attrs:{size:2,type:t.seller.supports[i].type}}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[i].description))])],1)})),0):t._e(),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("商家公告")]),e("div",{staticClass:"line"})]),e("div",{staticClass:"bulletin"},[e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])])])]),e("div",{staticClass:"detail-close"},[e("i",{staticClass:"icon-close",on:{click:t.hide}})])])])},$s=[],Ls={name:"HeaderDetail",data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}},props:{seller:{type:Object,default:function(){return{}}}},components:{supportIcon:y,star:et}},Os=Ls,Ts=(e("046f"),Object(_["a"])(Os,Ps,$s,!1,null,null,null)),Fs=Ts.exports,js=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"fade",appear:""}},[e("cube-popup",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"mask-closable":!0,position:"bottom",type:"shop-cart-list","z-index":90},on:{"mask-click":t.maskClick}},[e("transition",{attrs:{name:"move",appear:""},on:{"after-leave":t.afterLeave}},[t.visible?e("div",[e("div",{staticClass:"list-header"},[e("h1",{staticClass:"title"},[t._v("购物车")]),e("span",{staticClass:"empty",on:{click:t.clearList}},[t._v("清空")])]),e("cube-scroll",{staticClass:"list-content"},[e("ul",t._l(t.selectedFoods,(function(s){return e("li",{key:s.name,staticClass:"food"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"price"},[e("span",[t._v(t._s(s.price*s.count))])]),e("div",{staticClass:"cart-control-wrapper"},[e("CartControl",{attrs:{food:s},on:{ball_anim_trigger:t.onAdd}})],1)])})),0)])],1):t._e()])],1)],1)},Ns=[],Es="mask",Ds="leave",As="add",Rs={name:"shop-cart-list",props:{selectedFoods:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},maskClick:function(){this.visible=!1,this.$emit(Es)},afterLeave:function(){this.$emit(Ds)},clearList:function(){var t=this;this.$createDialog({type:"confirm",title:"确认清空购物车？",content:"将清空购物车内所有商品",onConfirm:function(){t.selectedFoods.forEach((function(t){t.count=0})),t.hide()}}).show()},onAdd:function(t){this.$emit(As,t)}},components:{CartControl:At}},zs=Rs,Is=(e("337c"),Object(_["a"])(zs,js,Ns,!1,null,"6e302bee",null)),Ms=Is.exports,Bs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"shop-cart-sticky"},[e("shop-cart",{ref:"shopCart",attrs:{selectedFoods:t.selectedFoods,minPrice:t.minPrice,deliveryPrice:t.deliveryPrice,showCartListProp:t.showCartListProp}})],1)},Hs=[],Js={name:"shop-cart-sticky",props:{selectedFoods:{type:Array,default:function(){return{}}},minPrice:{type:Number,default:0},deliveryPrice:{type:Number,default:0},showCartListProp:{type:Boolean,default:!1},shopCartList:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},ballFallAnim:function(t){this.$refs.shopCart.ballFallAnim(t)}},components:{ShopCart:Ot}},Ws=Js,Vs=(e("dd10"),Object(_["a"])(Ws,Bs,Hs,!1,null,"51274b86",null)),Xs=Vs.exports;Object(Ss["a"])(i["a"],Fs),Object(Ss["a"])(i["a"],Ms),Object(Ss["a"])(i["a"],Xs),Object(Ss["a"])(i["a"],ls),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(xs)}}).$mount("#app")},5717:function(t,s,e){"use strict";var i=e("2cca"),a=e.n(i);a.a},"5c97":function(t,s,e){"use strict";var i=e("4429"),a=e.n(i);a.a},"663f":function(t,s,e){"use strict";var i=e("b4da"),a=e.n(i);a.a},6881:function(t,s,e){},"72b1":function(t,s,e){},"758a":function(t,s,e){},"8f0f":function(t,s,e){"use strict";var i=e("b04d"),a=e.n(i);a.a},"92e2":function(t,s,e){},"9fed":function(t,s,e){},b04d:function(t,s,e){},b23b:function(t,s,e){"use strict";var i=e("52b5"),a=e.n(i);a.a},b3c6:function(t,s,e){"use strict";var i=e("4fb9"),a=e.n(i);a.a},b4da:function(t,s,e){},b52b:function(t,s,e){"use strict";var i=e("3661"),a=e.n(i);a.a},d0b3:function(t,s,e){"use strict";var i=e("dc69"),a=e.n(i);a.a},d986:function(t,s,e){},dc69:function(t,s,e){},dd10:function(t,s,e){"use strict";var i=e("92e2"),a=e.n(i);a.a},df84:function(t,s,e){"use strict";var i=e("72b1"),a=e.n(i);a.a},f72a:function(t,s,e){},f867:function(t,s,e){},fd6e:function(t,s,e){"use strict";var i=e("d986"),a=e.n(i);a.a},fd74:function(t,s,e){},fdcf:function(t,s,e){"use strict";var i=e("6881"),a=e.n(i);a.a}});
//# sourceMappingURL=app.55a920fb.js.map